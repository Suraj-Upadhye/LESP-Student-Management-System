<div class="w-full lg:w-10/12 px-4 mx-auto mt-6">
  <div class="relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-100 border-0">
    <div class="rounded-t bg-gray-100 mb-0 px-6 py-6 position:fixed">
      <div class="text-center flex justify-between">
        <h1 class="text-blueGray-700 text-xl font-bold uppercase">
          Teacher Signup account
        </h1>
        <button type="button" routerLink="/login"
          class="bg-blue-500 text-white active:bg-blue-600 font-bold uppercase text-xs px-2 py-1 rounded shadow hover:shadow-md outline-none focus:outline-none mr-5 ease-linear transition-all duration-150s h-10">
          Back to Login</button>
      </div>
      <div></div>
      <div class="flex-auto px-4 lg:px-10 py-10 pt-0">
        <h2 class="text-blueGray-400 text-sm mt-3 mb-10 font-bold uppercase">
          personal Information:-
        </h2>
        <div class="flex flex-wrap">
          <div class="w-full lg:w-6/12 px-4">
            <div class="header">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2 mt-3" for="firstName">
                First Name
              </label>
              <input type="text" name="firstname" #firstname="ngModel" [(ngModel)]="userObj.firstName" id="firstName"
                placeholder="Enter your first name" minlength="3"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                required>
              <div class="text-red-500"
                *ngIf="firstname.invalid && (firstname.touched || firstname.dirty ||isFormSubmited)">
                <!-- {{firstname|json}} -->
                <span *ngIf="firstname.errors?.['required']">First Name is Required</span>
                <span *ngIf="firstname.errors?.['minlength']">First Name must be at least 3 characters long</span>
              </div>

              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2 mt-4" for="middleName">
                Middle Name
              </label>
              <input type="text" name="middlename" #middlename="ngModel" [(ngModel)]="userObj.middleName"
                id="middleName" placeholder="Enter your middle name" minlength="3"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                required>
              <div class="text-red-500"
                *ngIf="middlename.invalid && (middlename.touched || middlename.dirty ||isFormSubmited)">
                <!-- {{firstname|json}} -->
                <span *ngIf="middlename.errors?.['required']">Middle Name is required</span>
                <span *ngIf="middlename.errors?.['minlength']">Middle Name must be at least 3 characters long</span>
              </div>

              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2 mt-4" for="lastName">
                Last Name
              </label>
              <input type="text" name="lastname" #lastname="ngModel" [(ngModel)]="userObj.lastName" id="lastName"
                placeholder="Enter your last name" minlength="3"
                class="px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                required>
            </div>
            <div class="text-red-500" *ngIf="lastname.invalid && (lastname.touched || lastname.dirty ||isFormSubmited)">
              <!-- {{firstname|json}} -->
              <span *ngIf="lastname.errors?.['required']">Last Name is required</span>
              <span *ngIf="lastname.errors?.['minlength']">Last Name must be at least 3 characters long</span>
            </div>
          </div>

          <!-- Right side content -->
          <div class="w-full lg:w-4/12 px-4 mt-4 flex justify-center">
            <label for="upload" class="mt-10 p-12 mb-4 border-2 rounded-lg items-center cursor-pointer"
              [style.backgroundImage]="'url(' + imageUrl + ')'"
              style="background-size: cover; background-position: center; width: 150px; height: 170px; background-color:white; position: relative;">
              <input id="upload" type="file" #fileInput class="hidden" accept="image/*"
                (change)="handleFileInput($event)" (click)="fileInput.click()" />
              <span class="upload-text" *ngIf="!imageUrl">Upload your photo</span>
            </label>
          </div>






        </div>
        <div class="w-full lg:w-6/12 px-4">
          <div class="relative w-full mb-3">
            <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2 mt-4" htmlfor="grid-password">
              Gender
            </label>
            <select id="gender" size="1" [(ngModel)]="userObj.gender"
              class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer ">
              <option value="" disabled selected hidden>---select Gender---</option>
              <option>Male</option>
              <option>Female</option>
              <option>Other</option>
            </select>
          </div>
        </div>
        <div class="flex flex-wrap">
          <div class="w-full lg:w-12/12 px-4">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mt-2 mb-2" for="grid-password">
                Address
              </label>
              <input type="text" name="address" #address="ngModel" [(ngModel)]="userObj.address" minlength="27"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="latthe Education Society's Polytechnic" required>
            </div>
            <div class="text-red-500" *ngIf="address.invalid && (address.touched || address.dirty ||isFormSubmited)">
              <span *ngIf="address.errors?.['required']">Address is required</span>
              <span *ngIf="address.errors?.['minlength']">Address must be at least 27 characters long</span>
            </div>
          </div>
          <div class="w-full lg:w-4/12 px-4 mt-4">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Pincode
              </label>
              <input type="text" name="pincode" #pincode="ngModel" [(ngModel)]="userObj.pincode"
                pattern="^[1-9]{1}[0-9]{2}\s{0,1}[0-9]{3}$"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="ex.987654" required>
            </div>
            <div class="text-red-500" *ngIf="pincode.invalid && (pincode.touched || pincode.dirty ||isFormSubmited)">
              <span *ngIf="pincode.errors?.['required']">Pincode is required</span>
              <span *ngIf="pincode.errors?.['pattern']">Please enter a valid pincode</span>
            </div>
          </div>
          <div class="w-full lg:w-4/12 px-4 mt-4">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Mobile No
              </label>
              <input type="text" name="mobileno" #mobileno="ngModel" [(ngModel)]="userObj.mobileNumber"
                pattern="[0-9]{10}"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="91*" required>
            </div>
            <div class="text-red-500" *ngIf="mobileno.invalid && (mobileno.touched || mobileno.dirty ||isFormSubmited)">
              <span *ngIf="mobileno.errors?.['required']">Mobile No is required</span>
              <span *ngIf="mobileno.errors?.['pattern']">Please enter a valid 10 digit Mobile No</span>
            </div>
          </div>
        </div>

        <hr class="mt-6 border-b-2 border-blueGray-300">
        <div class="flex flex-wrap">
          <div class="w-full lg:w-4/12 px-4 mt-4">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Qualification
              </label>
              <input type="text" name="qualification" #qualification="ngModel" [(ngModel)]="userObj.qualification"
                minlength="6"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="etc.xyz" required>
            </div>
            <div class="text-red-500"
              *ngIf="qualification.invalid && (qualification.touched || qualification.dirty ||isFormSubmited)">
              <span *ngIf="qualification.errors?.['required']">Qualification is required</span>
              <span *ngIf="qualification.errors?.['minlength']">Qualification must be at least 6 characters long</span>
            </div>
          </div>
          <div class="w-full lg:w-4/12 px-4 mt-4">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Teaching Experience
              </label>
              <input type="text" name="teaching" #teaching="ngModel" [(ngModel)]="userObj.teachingExperience"
                minlength="1"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="ex.xyz" required>
            </div>
            <div class="text-red-500" *ngIf="teaching.invalid && (teaching.touched || teaching.dirty ||isFormSubmited)">
              <span *ngIf="teaching.errors?.['required']">Teaching Experience is required</span>
              <span *ngIf="teaching.errors?.['minlength']">Teaching Experience must be at least 6 characters long</span>
            </div>
          </div>
          <div class="w-full lg:w-4/12 px-4">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2 mt-4" htmlfor="grid-password">
                Department
              </label>
              <select id="Deparment" size="1" [(ngModel)]="userObj.department"
                class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer ">
                <option value="" disabled selected hidden>---select Department---</option>
                <option>Computer Engineering </option>
                <option>Electrical Engineering</option>
                <option>Electronic Engineering</option>
                <option>Mechanical Engineering</option>
                <option>Civil Engineering</option>
              </select>
            </div>
          </div>
        </div>
        <hr class="mt-6 border-b-2 border-blueGray-300">
        <h2 class="text-blueGray-400 text-sm mt-8 mb-6 font-bold uppercase ">
          Security Details :-
        </h2>
        <div class="flex flex-wrap">
          <div class="w-full lg:w-4/12 px-4 mt-6">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Email
              </label>
              <input type="email" name="email" #email="ngModel" [(ngModel)]="userObj.email"
                pattern="^\w+([\.-]?\w+)@\w+([\.-]?\w+)(\.\w{2,3})+$" [disabled]="otpVerified"
                [ngClass]="{ 'disabled-component': otpVerified }"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="abc@gmail.com" required>
            </div>
            <div class="text-red-500" *ngIf="email.invalid && (email.touched || email.dirty ||isFormSubmited)">
              <span *ngIf="email.errors?.['required']">Email is required</span>
              <span *ngIf="email.errors?.['pattern']">Please enter a valid email address</span>
            </div>
          </div>
          <div class="w-40 lg:w-2/12 px-4 mt-6">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Valid 10.00 minutes
              </label>
              <input type="button" (click)="sendOTP()" [disabled]="otpVerified"
                [ngClass]="{ 'disabled-component': otpVerified }"
                class="bg-blue-500 text-white w-full active:bg-blue-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-5 ease-linear transition-all duration-150 h-10"
                value="Send OTP">
            </div>
          </div>
          <div class="w-full lg:w-4/12 px-4 mt-6">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                OTP
              </label>
              <input type="password" name="otp" [disabled]="otpVerified"
                [ngClass]="{ 'disabled-component': otpVerified }" #otp="ngModel" [(ngModel)]="userObj.otp"
                pattern="^[0-9]{6}$"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="6 digit OTP" required>
            </div>
            <div class="text-red-500" *ngIf="otp.invalid && (otp.touched || otp.dirty ||isFormSubmited)">
              <span *ngIf="otp.errors?.['required']">OTP is required</span>
              <span *ngIf="otp.errors?.['pattern']">Please enter a valid 6 digit OTP</span>
            </div>
          </div>
          <div class="w-40 lg:w-2/12 px-4 mt-12">
            <div class="relative w-full mb-3">
              <input type="button" (click)="verifyOTP()" [disabled]="otpVerified"
                [ngClass]="{ 'disabled-component': otpVerified }"
                class="bg-green-500 text-white w-full active:bg-green-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-5 ease-linear transition-all duration-150 h-10"
                value="Verify">
            </div>
          </div>


          <div class="w-full lg:w-4/12 px-4 mt-6">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Password
              </label>
              <input type="password" #password="ngModel" [(ngModel)]="userObj.password"
                pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="" required>
            </div>
            <div class="text-red-500"
              *ngIf="password.invalid && (password.touched || password.dirty || isFormSubmited)">
              <span *ngIf="password.errors?.['required']">Password is required</span>
              <span *ngIf="password.errors?.['pattern']">Password must contain at least 8 characters, including one
                uppercase letter, one lowercase letter, one number, and one special character</span>
            </div>
          </div>
          <div class="w-full lg:w-4/12 px-4 mt-6">
            <div class="relative w-full mb-3">
              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="grid-password">
                Re-password
              </label>
              <input type="password" #repassword="ngModel" [(ngModel)]="userObj.repassword"
                pattern="{{ userObj.password }}"
                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                placeholder="" required>
            </div>
            <div class="text-red-500"
              *ngIf="repassword.invalid && (repassword.touched || repassword.dirty || isFormSubmited)">
              <span *ngIf="repassword.errors?.['required']">Re-enter password is required</span>
              <span *ngIf="repassword.errors?.['pattern']">Re-entered password must match the password</span>
            </div>
          </div>


          <div>
            <hr class="mt-6 border-b-2 border-blueGray-300">
            <h2 class="text-blueGray-400 text-sm mt-8 mb-6 font-bold uppercase ">
              Working Details :-
            </h2>
            <h4 class="font-bold">Note : Teacher have to select the total no of subjects they are teaching for current
              Semester. Simply click on plus (+) button on page to add more subjects.</h4>

            <!-- First line of fields -->
            <div class="flex flex-wrap" *ngFor="let data of fieldData; let i = index">
              <div class="w-full lg:w-1/6 px-6 mt-4">
                <!-- Year -->
                <div class="relative w-full mb-3">
                  <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="year">
                    Year
                  </label>
                  <select [(ngModel)]="data.year"
                    class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
                    <option value="" disabled selected hidden>--select Year--</option>
                    <option>FY</option>
                    <option>SY</option>
                    <option>TY</option>
                  </select>
                </div>
              </div>

              <!-- Semester -->
              <div class="w-full lg:w-1/4 px-6 mt-4">
                <div class="relative w-full mb-3">
                  <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="semester">
                    Semester
                  </label>
                  <select [(ngModel)]="data.semester"
                    class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
                    <option value="" disabled selected hidden>--select Semester--</option>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                  </select>
                </div>
              </div>

              <!-- Branch -->
              <div class="w-full lg:w-1/4 px-6 mt-4">
                <div class="relative w-full mb-3">
                  <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="branch">
                    Branch
                  </label>
                  <!-- multiple size="3" removed this property -->
                  <select [(ngModel)]="data.branch"
                    class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
                    <option value="" disabled selected hidden>--select branch--</option>
                    <option>Computer Engineering</option>
                    <option>Electrical Engineering</option>
                    <option>Electronic Engineering</option>
                    <option>Civil Engineering</option>
                    <option>Mechanical Engineering</option>
                  </select>
                </div>
              </div>


              <div class="text-end flex justify-end mt-10 mb-4 px-8">
                <button
                  class="bg-blue-500 text-white active:bg-blue-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-5 ease-linear transition-all duration-150"
                  type="button" (click)="subjectData()">
                  Search Subject Data
                </button>
              </div>

              <!-- Division -->
              <div class="w-full lg:w-1/4 px-6 mt-4">
                <div class="relative w-full mb-3">
                  <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="division">
                    Division
                  </label>
                  <select [(ngModel)]="data.division"
                    class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
                    <option value="" disabled selected hidden>--select Division--</option>
                    <option>Div1</option>
                    <option>Div2</option>
                  </select>
                </div>
              </div>

              <!-- Subject -->
              <div class="w-full lg:w-1/6 px-6 mt-4">
                <div class="relative w-full mb-3">
                  <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="subjectName">
                    Subject
                  </label>
                  <select [(ngModel)]="selectedSubject" (change)="onSubjectChange()"
                    class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
                    <option value="" disabled selected hidden>--Select Subject--</option>
                    <option *ngFor="let subject of subjectdata" [value]="subject.subjectName">{{ subject.subjectName }}
                    </option>
                  </select>
                </div>
              </div>

              <!-- SessionType -->
              <div class="w-full lg:w-1/4 px-6 mt-4">
                <div class="relative w-full mb-3">
                  <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="sessionType">
                    SessionType
                  </label>
                  <select [(ngModel)]="selectedSessionType" multiple size="2"
                    class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
                    <option value="" disabled selected hidden>--Select SessionType--</option>
                    <option *ngFor="let sessionType of sessionTypes">{{ sessionType }}</option>
                  </select>
                </div>
              </div>

              <!-- Batch -->
              <div class="w-full lg:w-1/6 px-6 mt-4">
                <div class="relative w-full mb-3">
                  <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2" for="batch">
                    Batch
                  </label>
                  <select [(ngModel)]="selectedBatch" multiple size="3"
                    class="block py-2.5 px-0 w-full text-sm text-gray-500 border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
                    <option value="" disabled selected hidden>--Select Batch--</option>
                    <option *ngFor="let batch of batches">{{ batch }}</option>
                  </select>
                </div>
              </div>



              <!-- Buttons to add and remove fields -->
              <div class="w-full lg:w-1/6 px-6 mt-10">
                <button type="button" class="w-10 h-10 text-2xl bg-green-500" (click)="addFields()">+</button>
                <button type="button" class="w-10 h-10 bg-red-500 ml-4 text-2xl" (click)="removeFields(i)">-</button>
              </div>
            </div>

            <!-- Submit button -->
            <!-- check ngif for otpverified -->
            <div class="text-end flex justify-end mt-16 px-8">
              <button
                class="bg-blue-500 text-white active:bg-blue-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-5 ease-linear transition-all duration-150"
                type="button" (click)="onSubmit()">
                Submit
              </button>
            </div>
          </div>